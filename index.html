<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Master: ‡∏ï‡∏∞‡∏•‡∏∏‡∏¢‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ô‡∏≤‡∏¢‡∏™‡∏¥‡∏ö (‡πÇ‡∏Ñ‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢)</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4e54c8;
            --secondary: #8f94fb;
            --correct: #00b894;
            --wrong: #ff7675;
            --warning: #fdcb6e;
            --text: #2d3436;
            --bg-card: rgba(255, 255, 255, 0.98);
        }

        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 700px;
            text-align: center;
            backdrop-filter: blur(10px);
            position: relative;
            max-height: 90vh; /* ‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≠ */
            overflow-y: auto; /* ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏¢‡∏≤‡∏ß */
        }

        /* Scrollbar */
        .container::-webkit-scrollbar { width: 8px; }
        .container::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .container::-webkit-scrollbar-thumb { background: #bdc3c7; border-radius: 10px; }

        h1 { color: var(--primary); margin-bottom: 5px; font-size: 2rem; }
        h2 { color: var(--text); font-size: 1.5rem; }

        /* Menu Grid */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .btn-subject {
            padding: 20px;
            font-size: 1.1rem;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            position: relative;
            overflow: hidden;
        }
        .btn-subject:hover { transform: translateY(-3px); }
        .btn-thai { background: linear-gradient(45deg, #ff6b6b, #ee5253); }
        .btn-com { background: linear-gradient(45deg, #48dbfb, #0abde3); }
        .btn-law { background: linear-gradient(45deg, #feca57, #ff9f43); }
        .btn-soc { background: linear-gradient(45deg, #1dd1a1, #10ac84); }

        /* Quiz Area */
        #quiz-area, #score-area { display: none; animation: fadeIn 0.5s ease; }

        .progress-container {
            width: 100%;
            background-color: #dfe6e9;
            border-radius: 20px;
            margin: 15px 0;
            height: 8px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-box {
            font-size: 1.3rem;
            font-weight: 600;
            margin: 20px 0;
            color: var(--text);
            line-height: 1.6;
            text-align: left;
        }

        .options-list { display: flex; flex-direction: column; gap: 12px; }

        .btn-option {
            padding: 15px;
            border: 2px solid #dfe6e9;
            border-radius: 10px;
            background: white;
            cursor: pointer;
            text-align: left;
            font-size: 1.1rem;
            color: var(--text);
            transition: all 0.2s;
            font-family: 'Kanit', sans-serif;
        }
        .btn-option:hover:not(:disabled) { border-color: var(--primary); background-color: #f7f9ff; }
        .btn-option:disabled { cursor: default; opacity: 0.8; }

        .correct { background-color: var(--correct) !important; color: white !important; border-color: var(--correct) !important; }
        .wrong { background-color: var(--wrong) !important; color: white !important; border-color: var(--wrong) !important; }

        /* Explanation Box */
        .explanation-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            border-radius: 10px;
            text-align: left;
            display: none;
            animation: fadeIn 0.4s;
        }
        
        .btn-next {
            margin-top: 20px;
            padding: 12px 40px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            display: none;
            box-shadow: 0 4px 15px rgba(78, 84, 200, 0.3);
        }

        /* Analysis Section */
        .analysis-box {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }
        .tag-pill {
            display: inline-block;
            background: #ff7675;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9rem;
        }
        .review-item {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }
        .review-q { font-weight: bold; color: var(--wrong); }
        .review-ans { color: var(--correct); font-size: 0.95rem; margin-top: 5px; }

        .score-circle {
            width: 120px; height: 120px;
            background: var(--primary);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 20px;
            color: white; font-size: 2.5rem; font-weight: bold;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="container">
        <div id="menu-area">
            <h1>üéì ‡∏ï‡∏∞‡∏•‡∏∏‡∏¢‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ô‡∏≤‡∏¢‡∏™‡∏¥‡∏ö</h1>
            <p style="margin-bottom: 30px;">‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏£‡∏¥‡∏á</p>
            <div class="menu-grid">
                <button class="btn-subject btn-thai" onclick="startQuiz('thai')">
                    üìö ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢<br><span style="font-size:0.8rem; opacity:0.8;">‡∏™‡∏∏‡πà‡∏° 25 ‡∏Ç‡πâ‡∏≠</span>
                </button>
                <button class="btn-subject btn-com" onclick="startQuiz('computer')">
                    üíª ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå<br><span style="font-size:0.8rem; opacity:0.8;">‡∏™‡∏∏‡πà‡∏° 25 ‡∏Ç‡πâ‡∏≠</span>
                </button>
                <button class="btn-subject btn-law" onclick="startQuiz('law')">
                    ‚öñÔ∏è ‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢<br><span style="font-size:0.8rem; opacity:0.8;">‡∏™‡∏∏‡πà‡∏° 20 ‡∏Ç‡πâ‡∏≠</span>
                </button>
                <button class="btn-subject btn-soc" onclick="startQuiz('society')">
                    üåè ‡∏™‡∏±‡∏á‡∏Ñ‡∏°+‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô<br><span style="font-size:0.8rem; opacity:0.8;">‡∏™‡∏∏‡πà‡∏° 25 ‡∏Ç‡πâ‡∏≠</span>
                </button>
            </div>
        </div>

        <div id="quiz-area">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3 id="subject-title" style="margin:0; color:var(--primary);">‡∏ß‡∏¥‡∏ä‡∏≤...</h3>
                <span style="font-size: 0.9rem; color:#666;">
                    ‡∏Ç‡πâ‡∏≠ <span id="current-q">1</span> / <span id="total-q">25</span>
                </span>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="question-box" id="question-text">Loading...</div>
            <div class="options-list" id="options-container"></div>
            
            <div id="explanation-area" class="explanation-box">
                <span style="font-weight:bold;">üí° ‡πÄ‡∏â‡∏•‡∏¢:</span>
                <span id="explanation-text">...</span>
            </div>

            <button id="btn-next-q" class="btn-next" onclick="nextQuestion()">‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ûú</button>
            
            <div style="margin-top: 30px;">
                <button class="btn-subject" style="background:#b2bec3; padding:10px 20px; font-size:0.9rem;" onclick="playSound('click'); goHome()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ö</button>
            </div>
        </div>

        <div id="score-area">
            <h1>üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</h1>
            <div class="score-circle" id="final-score">0/0</div>
            
            <div class="analysis-box">
                <h3 style="color: #d63031;">‚ö†Ô∏è ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ß‡∏±‡∏á (‡∏ú‡∏¥‡∏î‡∏ö‡πà‡∏≠‡∏¢):</h3>
                <div id="weakness-tags">
                    <span style="color:#999;">- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ -</span>
                </div>
            </div>

            <div class="analysis-box">
                <h3 style="color: #e17055;">üìù ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î:</h3>
                <div id="review-list" style="max-height: 200px; overflow-y: auto;">
                    </div>
            </div>

            <button class="btn-subject btn-com" onclick="playSound('click'); goHome()" style="margin: 20px auto; width:100%;">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å / ‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà</button>
        </div>
    </div>

    <script src="subject_thai.js"></script>
    <script src="subject_computer.js"></script>
    <script src="subject_law.js"></script>
    <script src="subject_society.js"></script>

    <script>
        const sounds = {
            click: new Audio('sounds/click.mp3'),
            correct: new Audio('sounds/correct.mp3'),
            wrong: new Audio('sounds/wrong.mp3')
        };
        function playSound(type) { if(sounds[type]) { sounds[type].currentTime = 0; sounds[type].play().catch(e=>{}); } }

        // Configuration: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏ï‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤
        const QUIZ_CONFIG = {
            'thai': 25,
            'computer': 25,
            'society': 25,
            'law': 20
        };

        let activeQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let wrongAnswersLog = []; // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡πÑ‡∏ß‡πâ‡∏ó‡∏≥‡∏™‡∏£‡∏∏‡∏õ

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏° (Fisher-Yates Shuffle)
        function shuffle(array) {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (Keyword Detection) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏∏‡∏î‡∏≠‡πà‡∏≠‡∏ô
        function detectTopic(questionText) {
            const txt = questionText.toLowerCase();
            // ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
            if(txt.includes('‡∏£‡∏≤‡∏ä‡∏≤‡∏®‡∏±‡∏û‡∏ó‡πå') || txt.includes('‡∏û‡∏£‡∏∞')) return '‡∏Ñ‡∏≥‡∏£‡∏≤‡∏ä‡∏≤‡∏®‡∏±‡∏û‡∏ó‡πå';
            if(txt.includes('‡∏™‡∏∏‡∏†‡∏≤‡∏û')) return '‡∏Ñ‡∏≥‡∏™‡∏∏‡∏†‡∏≤‡∏û';
            if(txt.includes('‡∏™‡∏∞‡∏Å‡∏î') || txt.includes('‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô')) return '‡∏Å‡∏≤‡∏£‡∏™‡∏∞‡∏Å‡∏î‡∏Ñ‡∏≥';
            if(txt.includes('‡∏™‡∏≥‡∏ô‡∏ß‡∏ô') || txt.includes('‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á')) return '‡∏™‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏ó‡∏¢';
            if(txt.includes('‡∏™‡∏°‡∏≤‡∏™') || txt.includes('‡∏™‡∏ô‡∏ò‡∏¥') || txt.includes('‡∏ö‡∏≤‡∏•‡∏µ')) return '‡∏´‡∏•‡∏±‡∏Å‡∏†‡∏≤‡∏©‡∏≤';
            // ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå
            if(txt.includes('ram') || txt.includes('rom') || txt.includes('cpu') || txt.includes('‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå')) return 'Hardware';
            if(txt.includes('net') || txt.includes('mail') || txt.includes('protocol')) return 'Network/Internet';
            // ‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢
            if(txt.includes('‡∏≠‡∏≤‡∏ç‡∏≤')) return '‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡∏≤‡∏ç‡∏≤';
            if(txt.includes('‡πÅ‡∏û‡πà‡∏á')) return '‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏û‡πà‡∏á';
            if(txt.includes('‡∏ï‡∏≥‡∏£‡∏ß‡∏à')) return '‡∏û‡∏£‡∏ö.‡∏ï‡∏≥‡∏£‡∏ß‡∏à';
            
            return '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
        }

        function startQuiz(subject) {
            playSound('click');
            let sourceData = [];
            
            if(subject === 'thai') sourceData = window.thaiQuestions;
            else if(subject === 'computer') sourceData = window.computerQuestions;
            else if(subject === 'law') sourceData = window.lawQuestions;
            else if(subject === 'society') sourceData = window.societyQuestions;

            if(!sourceData || sourceData.length === 0) { alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö!"); return; }

            // 1. Copy ‡πÅ‡∏•‡∏∞ ‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå
            let shuffled = shuffle([...sourceData]); 
            
            // 2. ‡∏ï‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ñ‡πâ‡∏≤‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÑ‡∏°‡πà‡∏û‡∏≠)
            let limit = QUIZ_CONFIG[subject] || 20;
            activeQuestions = shuffled.slice(0, Math.min(limit, shuffled.length));

            // Reset ‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ
            currentIndex = 0; 
            score = 0;
            wrongAnswersLog = []; // ‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î

            // UI Update
            document.getElementById('menu-area').style.display = 'none';
            document.getElementById('score-area').style.display = 'none';
            document.getElementById('quiz-area').style.display = 'block';
            
            const titles = { 'thai': '‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢', 'computer': '‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå', 'law': '‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', 'society': '‡∏™‡∏±‡∏á‡∏Ñ‡∏°+‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô' };
            document.getElementById('subject-title').innerText = titles[subject];
            document.getElementById('total-q').innerText = activeQuestions.length;

            loadQuestion();
        }

        function loadQuestion() {
            document.getElementById('explanation-area').style.display = 'none';
            document.getElementById('btn-next-q').style.display = 'none';
            
            const q = activeQuestions[currentIndex];
            document.getElementById('current-q').innerText = currentIndex + 1;
            document.getElementById('question-text').innerText = q.question;
            
            const percent = ((currentIndex) / activeQuestions.length) * 100;
            document.getElementById('progress-bar').style.width = percent + '%';

            const optsDiv = document.getElementById('options-container');
            optsDiv.innerHTML = '';

            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = 'btn-option';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(index, q, btn);
                optsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selectedIndex, questionObj, btnElement) {
            const allBtns = document.querySelectorAll('.btn-option');
            allBtns.forEach(b => b.disabled = true);

            const correctIndex = questionObj.answer;

            if(selectedIndex === correctIndex) {
                btnElement.classList.add('correct');
                score++;
                playSound('correct');
            } else {
                btnElement.classList.add('wrong');
                allBtns[correctIndex].classList.add('correct');
                playSound('wrong');
                
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡πÑ‡∏ß‡πâ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
                wrongAnswersLog.push(questionObj);
            }

            const explainArea = document.getElementById('explanation-area');
            document.getElementById('explanation-text').innerText = questionObj.explanation || "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°";
            explainArea.style.display = 'block';

            const nextBtn = document.getElementById('btn-next-q');
            nextBtn.style.display = 'inline-block';
            nextBtn.innerText = (currentIndex === activeQuestions.length - 1) ? "‡∏î‡∏π‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• üìä" : "‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ûú";
        }

        function nextQuestion() {
            playSound('click');
            currentIndex++;
            if(currentIndex < activeQuestions.length) {
                loadQuestion();
            } else {
                processAndShowScore();
            }
        }

        function processAndShowScore() {
            playSound('correct'); // ‡∏à‡∏ö‡πÄ‡∏Å‡∏°
            document.getElementById('quiz-area').style.display = 'none';
            document.getElementById('score-area').style.display = 'block';
            document.getElementById('final-score').innerText = score + "/" + activeQuestions.length;

            // --- ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏à‡∏∏‡∏î‡∏≠‡πà‡∏≠‡∏ô (Weakness Analysis) ---
            const weaknessDiv = document.getElementById('weakness-tags');
            weaknessDiv.innerHTML = "";
            const reviewDiv = document.getElementById('review-list');
            reviewDiv.innerHTML = "";

            // 1. ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î
            if(wrongAnswersLog.length > 0) {
                let topicCounts = {};
                wrongAnswersLog.forEach(q => {
                    let topic = detectTopic(q.question);
                    topicCounts[topic] = (topicCounts[topic] || 0) + 1;

                    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô
                    let item = document.createElement('div');
                    item.className = 'review-item';
                    item.innerHTML = `
                        <div class="review-q">‚ùå ${q.question}</div>
                        <div class="review-ans">‚úÖ ‡∏ï‡∏≠‡∏ö: ${q.options[q.answer]} <br> <small>(${q.explanation || '-'})</small></div>
                    `;
                    reviewDiv.appendChild(item);
                });

                // ‡πÅ‡∏™‡∏î‡∏á Tag ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢
                let sortedTopics = Object.keys(topicCounts).sort((a,b) => topicCounts[b] - topicCounts[a]);
                
                sortedTopics.forEach(topic => {
                    let count = topicCounts[topic];
                    let span = document.createElement('span');
                    span.className = 'tag-pill';
                    span.innerText = `${topic} (${count} ‡∏Ç‡πâ‡∏≠)`;
                    weaknessDiv.appendChild(span);
                });

            } else {
                weaknessDiv.innerHTML = "<span style='color:green; font-weight:bold;'>‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏ñ‡∏π‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠ üéâ</span>";
                reviewDiv.innerHTML = "<p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô</p>";
            }
        }

        function goHome() {
            document.getElementById('menu-area').style.display = 'block';
            document.getElementById('score-area').style.display = 'none';
            document.getElementById('quiz-area').style.display = 'none';
        }
    </script>
</body>
</html>